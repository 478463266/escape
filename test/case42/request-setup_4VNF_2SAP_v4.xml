<?xml version="1.0" ?>
<virtualizer>
    <id>SingleBiSBiS</id>
    <name>Single-BiSBiS-View</name>
    <nodes>
        <node>
            <id>SingleBiSBiS</id>
            <name>SingleBiSBiS</name>
            <type>BiSBiS</type>
            <NF_instances>
                <node operation="create">
                    <id>ip_cli</id>
                    <name>iperf_client</name>
                    <type>iperf_client</type>
                    <ports>
                        <port>
                            <id>0</id>
                            <name>management</name>
                            <port_type>port-abstract</port_type>
                        </port>
                        <port>
                            <id>1</id>
                            <name>to_traffic_shaper</name>
                            <port_type>port-abstract</port_type>
                        </port>
                        <port>
                            <id>2</id>
                            <name>to_customer_fake</name>
                            <port_type>port-abstract</port_type>
                            <sap>sap1</sap>
                            <sap_data>
                                <role>consumer</role>
                            </sap_data>
                        </port>
                    </ports>
                    <resources>
                        <cpu>1.0</cpu>
                        <mem>3.0</mem>
                        <storage>3.0</storage>
                    </resources>
                    <constraints>
                        <affinity>
                            <id>1</id>
                            <object>../../../../node[id=tr_sh1]</object>
                        </affinity>
                    </constraints>
                </node>
                <node operation="create">
                    <id>tr_sh1</id>
                    <name>traffic_shaper</name>
                    <type>traffic_shaper</type>
                    <ports>
                        <port>
                            <id>0</id>
                            <name>management</name>
                            <port_type>port-abstract</port_type>
                        </port>
                        <port>
                            <id>1</id>
                            <name>to_iperf</name>
                            <port_type>port-abstract</port_type>
                        </port>
                        <port>
                            <id>2</id>
                            <name>to_onos_domain</name>
                            <port_type>port-abstract</port_type>
                        </port>
                    </ports>
                    <resources>
                        <cpu>1.0</cpu>
                        <mem>3.0</mem>
                        <storage>3.0</storage>
                    </resources>
                    <constraints>
                        <affinity>
                            <id>4</id>
                            <object>../../../../node[id=ip_cli]</object>
                        </affinity>
                        <antiaffinity>
                            <id>5</id>
                            <object>../../../../node[id=tr_sh2]</object>
                        </antiaffinity>
                    </constraints>
                </node>
                <node operation="create">
                    <id>ip_ser</id>
                    <name>iperf_server</name>
                    <type>iperf_server</type>
                    <ports>
                        <port>
                            <id>0</id>
                            <name>management</name>
                            <port_type>port-abstract</port_type>
                        </port>
                        <port>
                            <id>1</id>
                            <name>to_traffic_shaper</name>
                            <port_type>port-abstract</port_type>
                        </port>
                        <port>
                            <id>2</id>
                            <name>fake_to_SAP</name>
                            <port_type>port-abstract</port_type>
                            <sap>sap6</sap>
                            <sap_data>
                                <role>consumer</role>
                            </sap_data>
                        </port>
                    </ports>
                    <resources>
                        <cpu>1.0</cpu>
                        <mem>3.0</mem>
                        <storage>3.0</storage>
                    </resources>
                    <constraints>
                        <affinity>
                            <id>12</id>
                            <object>../../../../node[id=tr_sh2]</object>
                        </affinity>
                    </constraints>
                </node>
                <node operation="create">
                    <id>tr_sh2</id>
                    <name>traffic_shaper</name>
                    <type>traffic_shaper</type>
                    <ports>
                        <port>
                            <id>0</id>
                            <name>management</name>
                            <port_type>port-abstract</port_type>
                        </port>
                        <port>
                            <id>1</id>
                            <name>to_iperf</name>
                            <port_type>port-abstract</port_type>
                        </port>
                        <port>
                            <id>2</id>
                            <name>to_onos_domain</name>
                            <port_type>port-abstract</port_type>
                        </port>
                    </ports>
                    <resources>
                        <cpu>1.0</cpu>
                        <mem>3.0</mem>
                        <storage>3.0</storage>
                    </resources>
                    <constraints>
                        <affinity>
                            <id>10</id>
                            <object>../../../../node[id=ip_ser]</object>
                        </affinity>
                        <antiaffinity>
                            <id>6</id>
                            <object>../../../../node[id=tr_sh1]</object>
                        </antiaffinity>
                    </constraints>
                </node>
            </NF_instances>
            <flowtable>
                <flowentry operation="create">
                    <id>1</id>
                    <priority>100</priority>
                    <port>../../../NF_instances/node[id=ip_cli]/ports/port[id=2]</port>
                    <out>../../../ports/port[id=sap1]</out>
                </flowentry>
                <flowentry operation="create">
                    <id>2</id>
                    <priority>100</priority>
                    <port>../../../ports/port[id=sap1]</port>
                    <out>../../../NF_instances/node[id=ip_cli]/ports/port[id=2]</out>
                </flowentry>
                <flowentry operation="create">
                    <id>3</id>
                    <priority>100</priority>
                    <port>../../../NF_instances/node[id=ip_cli]/ports/port[id=1]</port>
                    <out>../../../NF_instances/node[id=tr_sh1]/ports/port[id=1]</out>
                </flowentry>
                <flowentry operation="create">
                    <id>4</id>
                    <priority>100</priority>
                    <port>../../../NF_instances/node[id=tr_sh1]/ports/port[id=1]</port>
                    <out>../../../NF_instances/node[id=ip_cli]/ports/port[id=1]</out>
                </flowentry>
                <flowentry operation="create">
                    <id>5</id>
                    <priority>100</priority>
                    <port>
                        ../../../NF_instances/node[id=tr_sh1]/ports/port[id=2]
                    </port>
                    <out>
                        ../../../NF_instances/node[id=tr_sh2]/ports/port[id=2]
                    </out>
                </flowentry>
                <flowentry operation="create">
                    <id>6</id>
                    <priority>100</priority>
                    <port>
                        ../../../NF_instances/node[id=tr_sh2]/ports/port[id=2]
                    </port>
                    <out>
                        ../../../NF_instances/node[id=tr_sh1]/ports/port[id=2]
                    </out>
                </flowentry>

                <flowentry operation="create">
                    <id>7</id>
                    <priority>100</priority>
                    <port>
                        ../../../NF_instances/node[id=tr_sh2]/ports/port[id=1]
                    </port>
                    <out>
                        ../../../NF_instances/node[id=ip_ser]/ports/port[id=1]
                    </out>
                </flowentry>
                <flowentry operation="create">
                    <id>8</id>
                    <priority>100</priority>
                    <port>
                        ../../../NF_instances/node[id=ip_ser]/ports/port[id=1]
                    </port>
                    <out>
                        ../../../NF_instances/node[id=tr_sh2]/ports/port[id=1]
                    </out>
                </flowentry>

                <flowentry operation="create">
                    <id>9</id>
                    <priority>100</priority>
                    <port>
                        ../../../NF_instances/node[id=ip_ser]/ports/port[id=2]
                    </port>
                    <out>../../../ports/port[id=sap6]</out>
                </flowentry>
                <flowentry operation="create">
                    <id>10</id>
                    <priority>100</priority>
                    <port>../../../ports/port[id=sap6]</port>
                    <out>
                        ../../../NF_instances/node[id=ip_ser]/ports/port[id=2]
                    </out>
                </flowentry>
            </flowtable>
        </node>
    </nodes>
</virtualizer>

